#!/bin/ksh

echo Compiling SPH-Bench for ${SYSTEM} system

case ${SYSTEM} in 

    intelmac) export MYF90="g95";;

    ompi) export MYF90="mpif90 -DMPI";;

    zen)ln -s sphbench.f90 sphbench.F90
	export MYF90="mpif90 -DMPI";;

    zensingle) ln -s sphbench.f90 sphbench.F90
              export MYF90="ifort";;

	*) echo "Unrecognised system"
	   exit 1 ;;

esac

${MYF90} -c -o particle_pos.o particle_pos.f90
${MYF90} -c -o sphbench.o     sphbench.F90

echo Linking
${MYF90} -o sphbench sphbench.o particle_pos.o -L. -ltorus -L${HOME}/cfitsio/lib -lcfitsio

echo Done

exit

